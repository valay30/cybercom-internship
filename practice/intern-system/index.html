<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Intern System</title>
    
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/components.css">
</head>
<body>
    <!-- Auth Screen -->
    <div id="auth-screen" class="auth-screen hidden">
        <div class="auth-card">
            <div style="font-size: 1.25rem; font-weight: 900; margin-bottom: 6px;">Intern System</div>
            <div style="color: var(--text-muted); font-size: 0.875rem; margin-bottom: 24px;">Login or create an account</div>

            <div style="display:flex; gap:8px; margin-bottom: 16px;">
                <button id="auth-tab-login" class="btn btn-primary" type="button" style="flex:1;">Login</button>
                <button id="auth-tab-signup" class="btn btn-ghost" type="button" style="flex:1; border: 1px solid var(--border-color); border-radius: 8px;">Sign Up</button>
            </div>

            <form id="login-form" class="auth-form">
                <div class="form-group">
                    <label>Email</label>
                    <input name="email" type="email" class="form-control" required placeholder="you@example.com" autocomplete="email">
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input name="password" type="password" class="form-control" required placeholder="••••••••" autocomplete="current-password">
                </div>
                <button class="btn btn-primary" type="submit" style="width:100%;">Login</button>
            </form>

            <form id="signup-form" class="auth-form hidden">
                <div class="form-group">
                    <label>Name</label>
                    <input name="name" type="text" class="form-control" placeholder="Full name">
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input name="email" type="email" class="form-control" required placeholder="you@example.com" autocomplete="email">
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input name="password" type="password" class="form-control" required placeholder="Create a password" autocomplete="new-password">
                </div>
                <div class="form-group">
                    <label>Role</label>
                    <select name="role" class="form-control" required>
                        <option value="MANAGER">Manager</option>
                        <option value="INTERN">Intern</option>
                    </select>
                </div>
                <button class="btn btn-primary" type="submit" style="width:100%;">Create Account</button>
            </form>

            <div id="auth-error" class="auth-error hidden"></div>
        </div>
    </div>

    <div id="app" style="display: contents;">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="brand">
                Intern System
            </div>

            <div id="intern-identity-container" class="hidden sidebar-section" style="margin-top: 0;">
                <label class="section-label">Active Intern</label>
                <select id="intern-selector" class="sidebar-select" style="color: #60a5fa;">
                    <!-- Dynamically filled -->
                </select>
            </div>

            <nav id="sidebar-nav">
                <!-- Navigation links -->
            </nav>

            <div class="sidebar-footer">
                <div class="section-label">Session Info</div>
                <div id="current-role-display" style="font-weight: 500;">Manager</div>
                <div id="intern-id-context" class="text-mono hidden"
                    style="font-size: 0.65rem; color: #60a5fa; margin-top: 4px;">ID: None</div>
                <button id="logout-btn" class="btn btn-ghost" type="button" style="margin-top: 12px; width: 100%; border: 1px solid #334155; color: #e2e8f0; border-radius: 10px;">Logout</button>
            </div>
        </aside>

        <!-- Main Content -->   
        <main class="main-content">
            <header>
                <h2 id="view-title">Dashboard</h2>
                <div id="header-actions"></div>
            </header>

            <div id="view-container" class="view-container">
                <!-- Views -->
            </div>
        </main>
    </div>

    <!-- Global Loading -->
    <div id="loading" class="loading-overlay hidden">
        <div class="spinner"></div>
        <span style="font-weight: 500; font-size: 0.875rem; color: var(--text-muted);">Syncing with Server...</span>
    </div>

    <!-- Modal Portal -->
    <div id="modal-portal" class="modal-overlay hidden">
        <div class="modal-content" id="modal-body">
            <!-- Modal Content -->
        </div>
    </div>

    <script src="js/state.js"></script>
    <script src="js/rules-engine.js"></script>
    <script src="js/validators.js"></script>
    <script src="js/fake-server.js"></script>
    <script src="js/renderer.js"></script>
    <script src="js/app.js"></script>
</body>
</html>